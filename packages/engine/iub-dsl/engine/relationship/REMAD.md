
# 关系处理模块

## 主要职责

1. 处理数据的副作用「如: 对表的增、改、删需要收集记录」, 并对应处理其副作用

处理表副作用的研讨:

1. 收集影响是在哪个时机收集呢? 每条APBDSL转换时? CUD动作完成时? 在调度中心收集?
2. 应该触发什么动作呢?
3. 更新有关联的数据「表格、表单」 --> 自动触发流程?
4. 其他什么副作用????

运行记录收集/副作用处理?
收集什么信息才是最有用的?

1. 期望在每项流程运行前和后收集. 「但是仅能拿到处理结果和交互信息, 并不符合当前需求」
2. 每个动作运行信息? 「侵入动作本身逻辑入侵太大, 有污染嫌疑」
3. 都在调度中心耦合会好维护 「但是不能保证不臃肿」

疑问:

1. 收集有可能产生影响的信息, 「如表格」
2. 使用?: 需要依赖收集才可以用啊??? 表依赖收集?? 数据使用的依赖收集??
3. 被调用的, 需要依赖收集/引用收集
4. 一个表名, 如何通知更新
5. 引用如何收集??? 使用??

思考:

1. 更新对应的APBDSL的flow??
2. 解析apbdsl的时候可以收集
3. 解析props的时候可以收集
4. 动作添加依赖收集 ??
5. 收集的结构??
6. action?、标示?
7. props?、 收集标示

  难点1: 实现方式
  难点2: 数据的标示

  收集内容:

1. 数据 -effect-> props「更新视图」
   1. 组件的props
      1. 渲染结构的condition
2. 数据 -effect-> flows 「 触发任务」
   1. condition触发task
   2. state触发task

  思考
  条件触发任务:
  如: CUD影响XX「表/接口/关系表」, 影响范围 「1、展示的「表/接口/关系表」, 2、表单输入的(为什么要影响)」, 如何影响, 触发了多少个task
